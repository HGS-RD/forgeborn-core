# cline-rules.md

> **Purpose**: This document outlines strict guardrails, architectural alignment principles, and integration rules for using **Cline CLI** as a development assistant within the Forgeborn-Core project. It ensures any code or asset generated by Cline adheres to the architectural vision, quality expectations, and design ethos of Forgeborn.

---

## 📐 General Guidelines

1. **Cline is a Contributor, not a Director**  
   Cline CLI must be used in an assistant role only. All architectural decisions, planning, and module ownership remain governed by the primary vision documents and core contributors.

2. **Cline must obey Forgeborn Architecture**  
   Generated files must:
   - Fit within the existing folder structure (e.g., `agents/`, `skills/`, `blueprints/`, `docs/`).
   - Conform to the modular agent design pattern.
   - Avoid introducing frameworks or dependencies not already approved.

3. **Explicit Blueprint-Driven Tasks Only**  
   - Cline must only be prompted with tasks derived from:
     - `blueprints/RC_*.yaml` planning artifacts
     - Agent specifications written in `*_spec.md`
     - CLI scaffolding outputs
   - It may not freely generate entire new agents or skills unless explicitly defined by a planning RC.

---

## 📁 Folder & Naming Conventions

1. **Agents**: All agents must be scoped under `agents/{agent_name}_v{n}`  
   - Core file must be named `*_core.mjs`
   - Entry must be `run_*.mjs`

2. **Skills**: All skills must be created in `skills/` subfolder of the agent that uses them.
   - File names must be snake_case and purpose-aligned (e.g., `generate_summary.mjs`)

3. **Docs**: All documentation created must:
   - Be written to the `/docs/` directory
   - Follow existing naming patterns (e.g., `security_requirements_spec.md`, `cli.md`)

4. **Logging & Memory**: Any Cline-generated code using Supabase or memory logs must:
   - Use the official `clients/supabase_client.mjs`
   - Write only to approved schemas (e.g., `forgeborn.llm_logs`, `blueprints`, etc.)
   - Respect `.env` configuration management

---

## 🧠 LLM Agent Alignment & Quality Rules

1. **LLM Routing**: If Cline attempts to use LLMs directly:
   - Must route through existing `llm_router/llm_router.mjs`
   - Specify model clearly (`openai`, `claude`, `gemini`, `grok`)

2. **Logging Output**:
   - All outputs from Cline LLM calls must include structured logs using `log_llm_call.mjs`

3. **Test & Validation**:
   - Any generated skill or agent must include a short CLI test case or `.mjs` test runner stub

---

## ✅ Enforcement & Auditability

1. **Rule Compliance Check**: Cline contributions must pass:
   - `npm run check:rules`
   - Folder naming, file patterns, and architectural compliance checks

2. **Git Governance**:
   - All code must be committed to a separate `cline-*` feature branch
   - Subject to Pull Request review by architect

3. **Meta Agent Supervision**:
   - Future meta agents (e.g., `validation_agent`, `security_agent`) will auto-audit any cline-generated code for conformance

---

## 🧩 Allowed Use Cases for Cline CLI

- Scaffolding agent folders from an approved `*_spec.md`
- Filling out skill files when stubbed by blueprint planner
- Generating documentation summaries from approved memory logs
- Creating CI/CD YAMLs or automation code from `.forgeborn/templates/`
- Bootstrapping new code only when paired with RC blueprint and planning output

---

## ❌ Forbidden Behaviors

- Generating large architectural rewrites without blueprint-level approval
- Adding new runtime dependencies
- Writing directly to Supabase schemas or GitHub branches
- Generating agents outside the Forgeborn modular format

---

## 🛡️ Final Note

Every contribution from Cline must reinforce — not fracture — the long-term autonomy, security, and modularity of the Forgeborn software factory. This `clined-rules.md` acts as the compliance contract for Cline-generated work.

> All violations will be automatically flagged by the future `policy_enforcer_agent` and may result in rollback or removal.
