# CI/CD and Linting Governance for Forgeborn

This document defines the standards and governance strategy for CI/CD pipelines, linting rules, and code quality controls within the Forgeborn Core repository. It ensures consistency, automation integrity, and scalability for contributions from humans and AI agents.

---

## 🧩 Repository Governance Scope

This policy applies to:

- `main` and all `feature/*` branches
- Agent code in `agents/`
- CLI tools in `cli/`
- Scripts in `scripts/`
- Markdown documentation in `docs/`

---

## 🧪 CI/CD Pipeline Requirements

All code changes pushed to `main` or submitted via pull requests must satisfy the following:

### ✅ Required Steps

- **Prettier formatting check**
- **ESLint static analysis**
- **YAML linting (docs and blueprints)**
- **Agent execution syntax check** (`run_*.mjs`)
- **Blueprint validation** if modified
- **Supabase client env validation** (if `.env` is modified)

### 🛠️ GitHub Actions Integration

- CI pipeline defined in `.github/workflows/lint.yml` and `ci.yml`
- Automatically blocks PRs if checks fail
- CI includes zip validation for documentation bundles
- Future enhancement: auto-review from AI `review_agent_v1`

---

## 🎯 Linting Configuration

### JavaScript/TypeScript

- **Tool**: `eslint`
- **Extends**: `eslint:recommended`, `plugin:prettier/recommended`
- **Rules**:
  - Disallow unused variables
  - Enforce trailing commas
  - Prefer `const` and `let` over `var`

### Markdown

- **Tool**: `markdownlint`
- **Rules**:
  - Line length limit: 120
  - No trailing spaces
  - Heading level consistency

### YAML

- **Tool**: `yamllint`
- **Config**: Enforce 2-space indentation and key sorting

---

## 🧠 AI-Generated Code Rules

To ensure quality when using agents or tools like Cline CLI:

- All auto-generated code **must pass `check:rules`** before commit
- Generated files must include:
  - Agent name
  - Generation date
  - Associated blueprint (if applicable)
- No direct commits from auto-generated code unless verified via `planning_agent_v1`

---

## 🧩 Contributor Responsibilities

- Run `npm run check:rules` locally before submitting
- Provide test coverage if modifying agent logic
- Follow `rules.md` and `code_governance.md` documentation
- Use `feature/` branches and open PRs

---

## 🔮 Future Enhancements

- Full AI-assisted PR review bot
- Autogenerated changelog
- Visual rule diff and policy change audits
- Supabase logging for rules compliance

---

Maintained by: `meta_orchestrator_v1`, `ci_pipeline_bot`, and human maintainers.
